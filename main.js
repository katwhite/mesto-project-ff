(()=>{"use strict";var e=document.querySelector("#card-template").content,t=function(e){e.remove()};function r(t,r,n,o){var c=t.link,u=t.name,i=e.querySelector(".card").cloneNode(!0),a=i.querySelector(".card__delete-button"),p=i.querySelector(".card__like-button"),s=i.querySelector(".card__image");return s.src=c,s.alt=u,i.querySelector(".card__title").textContent=u,a.addEventListener("click",(function(){return r(i)})),p.addEventListener("click",(function(e){return n(e)})),s.addEventListener("click",(function(){return o(i)})),i}var n=function(e){e.target.classList.contains("card__like-button")&&e.target.classList.toggle("card__like-button_is-active")};function o(e){e.classList.add("popup_is-animated"),e.classList.add("popup_is-opened"),e.addEventListener("click",i),document.addEventListener("keydown",u)}function c(e){e.classList.remove("popup_is-opened"),e.classList.remove("popup_is-animated"),e.removeEventListener("click",i),document.removeEventListener("keydown",u)}function u(e){"Escape"===e.key&&c(document.querySelector(".popup_is-opened"))}function i(e){e.target.classList.contains("popup")&&c(document.querySelector(".popup_is-opened"))}var a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function p(e,t){var r=Array.from(e.querySelectorAll("".concat(t.inputSelector)));r.forEach((function(n){f(e,n,t.inputErrorClass,t.errorClass),S(r,e.querySelector("".concat(t.submitButtonSelector)),t.inactiveButtonClass)}))}var s,l,d,_,y,m,v,f=function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("".concat(r)),o.classList.remove("".concat(n)),o.textContent=""},S=function(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove("".concat(r)),t.removeAttribute("disabled")):(t.classList.add("".concat(r)),t.setAttribute("disabled",!0))},q=document.querySelector(".places__list"),k=document.querySelector(".profile__add-button"),L=document.querySelector(".profile__edit-button"),b=document.querySelector(".popup_type_edit"),E=document.querySelector(".popup_type_new-card"),C=document.querySelector(".popup_type_image"),g=b.querySelector(".popup__input_type_name"),x=b.querySelector(".popup__input_type_description"),h=document.querySelector(".profile__title"),A=document.querySelector(".profile__description"),j=b.querySelector(".popup__form"),B=E.querySelector(".popup__form"),w=(E.querySelector(".popup__button"),E.querySelector(".popup__input_type_card-name")),D=E.querySelector(".popup__input_type_url"),M=C.querySelector(".popup__image"),V=C.querySelector(".popup__caption");function z(e){o(C),M.src=e.querySelector(".card__image").src,V.textContent=e.querySelector(".card__title").textContent,M.alt=e.querySelector(".card__title").textContent}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var o=r(e,t,n,z);q.append(o)})),C.querySelector(".popup__close").addEventListener("click",(function(){return c(C)})),b.querySelector(".popup__close").addEventListener("click",(function(){return c(b)})),L.addEventListener("click",(function(){o(b),p(b.querySelector("".concat(a.formSelector)),a),g.value=h.textContent,x.value=A.textContent})),j.addEventListener("submit",(function(e){e.preventDefault(),h.textContent=g.value,A.textContent=x.value,c(b)})),k.addEventListener("click",(function(){o(E),p(E.querySelector("".concat(a.formSelector)),a)})),B.addEventListener("submit",(function(e){e.preventDefault();var o=r({name:w.value,link:D.value},t,n,z);q.prepend(o),B.reset(),c(E)})),E.querySelector(".popup__close").addEventListener("click",(function(){return c(E)})),l=(s=a).formSelector,d=s.inputSelector,_=s.submitButtonSelector,y=s.inactiveButtonClass,m=s.inputErrorClass,v=s.errorClass,Array.from(document.querySelectorAll("".concat(l))).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()}));var t=Array.from(e.querySelectorAll("".concat(d))),r=e.querySelector("".concat(_));S(t,r,y),t.forEach((function(n){n.addEventListener("input",(function(){(function(e,t,r,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?f(e,t,r,n):function(e,t,r,n,o){var c=e.querySelector(".".concat(t.id,"-error"));t.classList.add("".concat(n)),c.textContent=r,c.classList.add("".concat(o))}(e,t,t.validationMessage,r,n)})(e,n,m,v),S(t,r,y)}))}))}))})();